{"name":"Known Defects","tagline":"","body":"# Why Would I Want To Use This Annotation?\r\n\r\nI wrote this annotation to help me when working with legacy code. Much of the code I work with does not have associated unit tests, so its behavior is not well documented.\r\nWhen adding functionality or changing an existing part of the system, I try to write as many unit tests as I can to document the behavior and to help ensure that I don't break existing functionality.\r\n\r\nIn a perfect world, the legacy code would all be correct and the unit tests would be an accurate description of the system's behavior.\r\nSince I don't live in a perfect world, the reality is that quite often the legacy code contains bugs. By writing tests that document the behavior of the system, I am also writing tests that pass because of these bugs.\r\nI don't want someone else to look at the tests as an accurate description of how the system works, especially if the behavior is dependent on defects.\r\nThe answer I went with was to create an annotation that can be added to (preferably test) methods to indicate that the behavior of the method is dependent on a known defect.\r\n\r\nHere's an example from the code that prompted me to create this annotation:\r\n\r\n    @Test(expected = InvalidRequestException.class)\r\n    public void testValidateNullResponse() {\r\n        ProtocolParser.validateResponse(null);\r\n    }\r\n\r\nThis test documents the system as it currently exists, but the behavior is not correct. The `ProtocolParser` class should be throwing an `InvalidResponseException`, not an `InvalidRequestException`.\r\nTo document this defect, I add the following annotation to the test method:\r\n\r\n`@KnownDefect(\"Should throw InvalidResponseException\")`\r\n\r\nThe correct behavior is now documented, and the test still passes.\r\n\r\n## How do I use this?\r\n\r\nThe simplest way to use these annotations is with Maven. Simply add the following to your POM:\r\n\r\n    <dependency>\r\n        <groupId>com.megatome.knowndefects</groupId>\r\n        <artifactId>knowndefects</artifactId>\r\n        <version>1.1</version>\r\n        <scope>test</scope>\r\n    </dependency>\r\n    \r\nIf you're using Gradle:\r\n\r\n    testCompile \"com.megatome.knowndefects:knowndefects:1.1\"\r\n\r\nPortions of this code were written in front of a live studio audience.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}