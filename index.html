<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Known Defects by iamthechad</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Known Defects</h1>
        <h2></h2>
        <a href="https://github.com/iamthechad/knowndefects" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="why-would-i-want-to-use-this-annotation" class="anchor" href="#why-would-i-want-to-use-this-annotation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why Would I Want To Use This Annotation?</h1>

<p>I wrote this annotation to help me when working with legacy code. Much of the code I work with does not have associated unit tests, so its behavior is not well documented.
When adding functionality or changing an existing part of the system, I try to write as many unit tests as I can to document the behavior and to help ensure that I don't break existing functionality.</p>

<p>In a perfect world, the legacy code would all be correct and the unit tests would be an accurate description of the system's behavior.
Since I don't live in a perfect world, the reality is that quite often the legacy code contains bugs. By writing tests that document the behavior of the system, I am also writing tests that pass because of these bugs.
I don't want someone else to look at the tests as an accurate description of how the system works, especially if the behavior is dependent on defects.
The answer I went with was to create an annotation that can be added to (preferably test) methods to indicate that the behavior of the method is dependent on a known defect.</p>

<p>Here's an example from the code that prompted me to create this annotation:</p>

<pre><code>@Test(expected = InvalidRequestException.class)
public void testValidateNullResponse() {
    ProtocolParser.validateResponse(null);
}
</code></pre>

<p>This test documents the system as it currently exists, but the behavior is not correct. The <code>ProtocolParser</code> class should be throwing an <code>InvalidResponseException</code>, not an <code>InvalidRequestException</code>.
To document this defect, I add the following annotation to the test method:</p>

<p><code>@KnownDefect("Should throw InvalidResponseException")</code></p>

<p>The correct behavior is now documented, and the test still passes.</p>

<h2>
<a id="how-do-i-use-this" class="anchor" href="#how-do-i-use-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I use this?</h2>

<p>The simplest way to use these annotations is with Maven. Simply add the following to your POM:</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.megatome.knowndefects&lt;/groupId&gt;
    &lt;artifactId&gt;knowndefects&lt;/artifactId&gt;
    &lt;version&gt;1.1&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<p>If you're using Gradle:</p>

<pre><code>testCompile "com.megatome.knowndefects:knowndefects:1.1"
</code></pre>

<p>Portions of this code were written in front of a live studio audience.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/iamthechad/knowndefects/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/iamthechad/knowndefects/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/iamthechad/knowndefects"></a> is maintained by <a href="https://github.com/iamthechad">iamthechad</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
